{% extends 'base.twig' %}

{% block title %}Accueil{% endblock %}

{% block content %}
    <h2 class="my-4">Bienvenue sur notre site des restaurants de Lyon</h2>
    <p>DÃ©couvrez les meilleurs restaurants de Lyon autour de vous.</p>
    <div id="map" style="height: 500px;"></div>
    <ul id="restaurant-list">
        {% for restaurant in restaurants %}
            <li>{{ restaurant.tags.name }} - {{ restaurant.tags['addr:street']|default('Adresse inconnue') }}</li>
        {% endfor %}
    </ul> <!-- Section for restaurant list -->
    <script>
        var map = L.map('map').setView([45.75, 4.85], 13); // Coordinates for Lyon

        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            //attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
        }).addTo(map);

        

        var restaurants = {{ restaurants|json_encode|raw }};
        restaurants.forEach(function(restaurant) {
            var marker = L.marker([restaurant.lat, restaurant.lon]).addTo(map);
            marker.bindPopup(restaurant.tags.name || "Restaurant");

            
        });
    </script>
{% endblock %}